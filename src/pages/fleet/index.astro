---
import BaseLayout from "../../layouts/BaseLayout.astro";
import { getCollection } from "astro:content";
import FleetIndexCard from "../../components/Fleet/FleetIndexCard.astro";
import HeroGeneralPages from "../../components/HeroGeneralPages.astro";
import FinalCTASection from "../../components/FinalCTASection.astro";
import { ADDRESS_CITY, AIRPORT_CODE, AIRPORT_WITH_CODE_SHORT, CITY_AND_STATE, COMPANY_NAME, PHONE_NUMBER } from "../../data/consts";
import LocationSectionBlack from "../../components/LocationSectionBlack.astro";
import MaintenancePhilosophy from "../../components/Fleet/MaintenancePhilosophy.astro";

const fleet = await getCollection("fleet");
const sortedFleet = fleet.sort(
  (a, b) => (a.data.order || 999) - (b.data.order || 999)
);

const heroData = {
  images: [
    {
    src: "/src/assets/fleet/hangar-two-aircraft-hangar-front-at-california-mh-aviation-lancaster-become-a-pilot.webp",
    alt: "Flight Training Programs",
  }
  ],
  title: "Our Fleet",
  subTitle:
    "Train in our well-maintained fleet of modern aircraft equipped with the latest avionics.",
};

const locationData = {
  eyebrow: "Strategic Location",
  headline: "Train Where The<br> Skies Are Clear",
  bodyCopy:
    "Located at Gen. William Fox Airfield (KWJF) in Lancaster, CA. Enjoy the scenic high desert views and learn to master real-world wind conditions without the heavy congestion of busy city airports.",
};

const finalCtaData = {
  eyebrow: "Ready to Fly?",
  headline: "Your Aviation Journey<br>Begins Here",
  bodyCopy:
    "Whether you are looking for your first flight, aircraft maintenance,<br> or fueling services, MH Aviation is ready to serve you.",
  cta: {
    text: "Schedule a Visit",
    href: "/contact/",
    subtext: `Call us directly at ${PHONE_NUMBER}`,
  },
  image: {
    src: "/src/assets/instructing/instructing-on-top-of-plane-mh-aviation-california-discovery-flight.jpg",
    alt: "Runway view at sunset",
  },
};

const metaProps = {
  siteTitle: `Our Fleet for Pilot Training in ${CITY_AND_STATE} | ${COMPANY_NAME}`,
  siteDescription: `Explore the ${COMPANY_NAME} fleet at ${AIRPORT_WITH_CODE_SHORT}. Featuring modern, Garmin-equipped aircraft for flight training and multi-engine rentals in ${ADDRESS_CITY}.`,
  siteKeywords: `flight school fleet, aircraft rental Lancaster, Cessna rental, Piper multi-engine, Garmin equipped aircraft, ${AIRPORT_CODE} aircraft`
};
---

<BaseLayout {...metaProps} >
  <HeroGeneralPages data={heroData} />

  <section class="py-16 md:py-24 px-4 bg-ink-50">
    <div class="max-w-5xl mx-auto">
      
      <div class="text-center mb-16">
        <span class="subtitle">
          Excellence in Maintenance
        </span>
        <h1 class="title-black">
          Meet The Fleet
        </h1>
        <p class="text-lg text-ink-950 mt-4 max-w-2xl mx-auto">
          Every aircraft in our line is maintained to FAA Part 145 standards, ensuring safety and reliability for every flight hour.
        </p>
      </div>

      <div class="flex flex-col gap-8">
        {
          sortedFleet.map((plane) => (
            <div class="w-full">
          <FleetIndexCard aircraft={plane} />
        </div>
          ))
        }
      </div>

    </div>
  </section>
  <MaintenancePhilosophy/>
  <LocationSectionBlack data={locationData}/>
  <FinalCTASection data={finalCtaData}/>
</BaseLayout>