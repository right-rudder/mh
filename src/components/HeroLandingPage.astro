---
import ImageComp from "./ImageComp.astro";

interface ctaProp {
  url: string;
  text: string;
  variant?: string;
}

interface Props {
  data: {
    image: {
      src: string;
      alt: string;
      imageCentering?: string;
    };
    videoSrc?: string;
    videoSrcVertical?: string;
    title: string;
    subTitle?: string;
    cta?: ctaProp[];
  };
}

const { data } = Astro.props;
---

<section
  class="pt-50 sm:pt-40 pb-20 hero-section relative overflow-hidden flex justify-center items-center lg:items-end lg:pb-30 text-ink-50 min-h-screen"
  aria-label="Hero section"
>
  <div class="absolute inset-0 -z-20 w-full h-full">
    <ImageComp
      src={data.image.src}
      alt={data.image.alt}
      class={`w-full h-full object-cover animate-slow-zoom ${data.image.imageCentering || "object-center"}`}
      loading="eager"
      quality={80}
    />

    {data.videoSrc && (
      <video
        autoplay
        muted
        loop
        playsinline
        class="absolute inset-0 w-full h-full object-cover hidden md:block"
      >
        <source src={data.videoSrc} type="video/mp4" />
      </video>
    )}

    {data.videoSrcVertical && (
      <video
        autoplay
        muted
        loop
        playsinline
        class="absolute inset-0 w-full h-full object-cover block md:hidden"
      >
        <source src={data.videoSrcVertical} type="video/mp4" />
      </video>
    )}
  </div>

  <div class="absolute inset-0 bg-ink-950/40 backdrop-blur-xs lg:backdrop-blur-none -z-10"></div>

  <div class="max-w-7xl w-full px-5 md:px-8 lg:px-12 mx-auto relative z-10">
    <div class="flex flex-col justify-center items-center lg:items-start max-w-4xl">
      <div class="flex flex-col items-center lg:items-start gap-y-6 text-center lg:text-left">
        
        <h1 class="hero-title !font-main-header text-ink-50 flex flex-col gap-2">
          <span class="hero-title !font-main-header text-ink-50 !text-xl sm:!text-4xl md:!text-5xl uppercase font-bold" set:html={data.title} />
        </h1>
        
        {data.subTitle && (
          <p
            class="hero-subtitle text-base max-w-xl sm:text-lg md:text-xl font-medium text-ink-50/90"
            set:html={data.subTitle}
          />
        )}
      </div>

      {data.cta && data.cta.length > 0 && (
        <div class="hero-cta mt-12 flex flex-col gap-4 items-center sm:flex-row lg:items-start w-full sm:w-auto">
          {data.cta.map((item, index) => (
            <a
              href={item.url}
              class={`cta-button ${index === 0 ? "btn-primary" : "btn-transparent"} hover:cursor-pointer text-base sm:text-lg px-10 py-5 min-w-[220px] text-center font-bold transition-all duration-500 relative overflow-hidden group`}
              aria-label={item.text}
            >
              <span class="relative z-10">{item.text}</span>
              <span class="cta-shine"></span>
            </a>
          ))}
        </div>
      )}
    </div>
  </div>
</section>

<style>
  .hero-title {
    text-shadow: 0 5px 15px rgba(0, 0, 0, 0.4);
  }

  .hero-subtitle {
    text-shadow: 0 2px 10px rgba(0, 0, 0, 0.4);
  }

  .cta-button {
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
  }

  .cta-button:hover {
    transform: translateY(-3px);
    box-shadow: 0 15px 40px rgba(0, 0, 0, 0.4);
  }

  .cta-shine {
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
    transition: left 0.6s ease-in-out;
  }

  .cta-button:hover .cta-shine {
    left: 100%;
  }

  @keyframes slow-zoom {
    from { transform: scale(1); }
    to { transform: scale(1.1); }
  }

  .animate-slow-zoom {
    animation: slow-zoom 20s ease-in-out infinite alternate;
  }
</style>