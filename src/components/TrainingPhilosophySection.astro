---
import ImageWithGradientAndText from "./ImageWithGradientAndText.astro";
import { FaUsers } from "react-icons/fa";

interface Props {
  data: {
    eyebrow: string;
    title: string;
    description: string;
    quote: string;
    quoteAuthor: string;
    image: {
      src: string;
      alt: string;
    };
    cta: {
      text: string;
      href: string;
    };
  };
}

const { data } = Astro.props;
---

<section class="py-16 md:py-24 bg-ink-50 overflow-hidden">
  <div class="max-w-7xl mx-auto px-5 md:px-8 lg:px-12">
    <div class="grid grid-cols-1 lg:grid-cols-2 gap-16 items-center">
      
      <div class="reveal-content relative aspect-[3/4] w-full rounded-sm overflow-hidden shadow-2xl group order-2 opacity-0 translate-x-8 transition-all duration-1000 ease-out">
        <ImageWithGradientAndText
          src={data.image.src}
          alt={data.image.alt}
          class="w-full h-full object-cover object-[60%_30%] transition-transform duration-700 group-hover:scale-105"
        />
        <div
            class="
              absolute bottom-4 left-1/2 -translate-x-1/2 sm:left-6 sm:translate-x-0 bg-ink-50/95 backdrop-blur-sm p-4 rounded-sm shadow-lg border-l-4 border-ochre-600 max-w-xs w-[calc(100%-2rem)]"
          >
          <div class="flex items-center gap-3 mb-2">
            <FaUsers className="text-ochre-600 text-xl" />
            <span class="font-bold text-ink-950 text-sm uppercase tracking-wide">Our Mission Statement</span>
          </div>
          <p class="text-xs text-ink-600 font-medium leading-relaxed">
            "MH Aviation strives to create a welcoming, family-style flight school where safety is paramount, aircraft are updated and readily available, and every student receives detailed, personalized training. Our goal is to help pilots of all levels succeed and make learning attainable through honest pricing and a supportive aviation community."
          </p>
        </div>
      </div>

      <div class="reveal-content order-1 opacity-0 -translate-x-8 transition-all duration-1000 ease-out">
        <div class="flex items-center gap-3">
          <p class="subtitle">
            {data.eyebrow}
          </p>
        </div>

        <h2 class="title-black" set:html={data.title} />

        <div class="bg-ink-100 border-l-4  border-ink-200 p-6 mb-8 rounded-r-sm">
           <p class="text-ink-700 font-medium italic text-lg leading-relaxed font-sans">
             "{data.quote}"
           </p>
           <p class="text-ink-700 font-bold text-sm italic leading-relaxed font-sans">â€” {data.quoteAuthor}</p>
        </div>

        <p class="font-sans text-ink-600 mb-8" set:html={data.description} />

        <div class="flex flex-col sm:flex-row gap-4">
          <a href={data.cta.href} class="btn-primary">
             {data.cta.text}
          </a>
        </div>
      </div>

    </div>
  </div>
</section>

<script>
  const observerOptions = {
    threshold: 0.1,
    rootMargin: '0px 0px -50px 0px'
  };

  const observer = new IntersectionObserver((entries) => {
    entries.forEach((entry) => {
      if (entry.isIntersecting) {
        entry.target.classList.remove('opacity-0', 'translate-x-8', '-translate-x-8');
        observer.unobserve(entry.target);
      }
    });
  }, observerOptions);

  document.querySelectorAll('.reveal-content').forEach((el) => observer.observe(el));
</script>