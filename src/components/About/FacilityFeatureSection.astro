---
import { FaCheck } from "react-icons/fa";
import ImageWithGradientAndText from "../ImageWithGradientAndText.astro";

interface Props {
  data: {
    eyebrow: string;
    title: string;
    description: string;
    features: string[];
    image: {
      src: string;
      alt: string;
    };
  };
}

const { data } = Astro.props;
---

<section class="py-16 md:py-24 bg-ink-950">
  <div class="max-w-7xl mx-auto px-5 md:px-8 lg:px-12">
    <div class="bg-ink-50 p-8 md:p-12 lg:p-0 rounded-sm shadow-xl flex flex-col lg:flex-row overflow-hidden reveal-section opacity-0 translate-y-8 transition-all duration-1000">
      <div class="lg:w-1/2 p-0 lg:p-16 flex flex-col justify-center">
        <span class="text-ochre-600 font-bold uppercase tracking-widest text-sm mb-1">
          {data.eyebrow}
        </span>
        <h2 class="title !text-[2.5rem] uppercase !font-main-header tracking-wide !text-ink-950" set:html={data.title}></h2>
        
        <p class="text-ink-600 text-lg mb-10 leading-relaxed">
          {data.description}
        </p>

        <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
          {data.features.map((feature) => (
            <div class="flex items-center gap-3 group cursor-default">
              <div class="flex-shrink-0 w-6 h-6 rounded-full bg-ochre-100 border border-ochre-600/20 flex items-center justify-center text-ochre-600 text-[10px] group-hover:bg-ochre-600 group-hover:text-ink-50 transition-all duration-300">
                <FaCheck />
              </div>
              <span class="text-ink-900 font-medium group-hover:text-ochre-600 transition-colors duration-300">{feature}</span>
            </div>
          ))}
        </div>
      </div>

      <div class="lg:w-1/2 relative min-h-[400px]">
        <ImageWithGradientAndText
          src={data.image.src}
          alt={data.image.alt}
          class="absolute inset-0 w-full h-full object-cover"
        />
      </div>

    </div>
  </div>
</section>

<script>
  const observer = new IntersectionObserver((entries) => {
    entries.forEach((entry) => {
      if (entry.isIntersecting) {
        entry.target.classList.remove('opacity-0', 'translate-y-8');
        entry.target.classList.add('opacity-100', 'translate-y-0');
        observer.unobserve(entry.target);
      }
    });
  }, { threshold: 0.15 });

  const section = document.querySelector('.reveal-section');
  if (section) observer.observe(section);
</script>