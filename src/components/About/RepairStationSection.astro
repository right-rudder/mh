---
import ImageComp from "../ImageComp.astro";
import { FaCheck, FaWrench } from "react-icons/fa";

interface Props {
  data: {
    eyebrow: string;
    title: string;
    description: string[];
    features: string[];
    stationNumber: string;
    backgroundImage: string;
  };
}

const { data } = Astro.props;

const repairImage = "/src/assets/repair-station/mh-aviation-repair-station-open-engine-backed-close-up-pistons-at-lancaster-california.webp";
const repairAlt = "FAA Part 145 Repair Station hangar at MH Aviation";
---

<section id="repair-station" class="py-20 md:py-32 relative overflow-hidden">
  
  <div class="absolute inset-0 -z-10">
    <ImageComp 
      src={data.backgroundImage} 
      alt="Maintenance hangar background" 
      class="w-full h-full object-cover opacity-20"
    />
    <div class="absolute inset-0 bg-gradient-to-t from-ink-950  to-ink-950/85"></div>
  </div>


  <div class="max-w-7xl mx-auto px-5 md:px-8 lg:px-12 relative z-10">
    <div class="grid grid-cols-1 lg:grid-cols-2 gap-16 lg:gap-24 items-center">
      
      <div class="order-2 lg:order-1 reveal-text opacity-0 translate-y-8 transition-all duration-1000 ease-out">
        
        <span class="font-sans font-medium text-ochre-600 uppercase tracking-widest text-sm block mb-1">
          {data.eyebrow}
        </span>

        <h2 class="title !text-[2.5rem] uppercase !font-main-header tracking-wide !text-ink-50" set:html={data.title}></h2>

        <div class="space-y-6 mb-12">
            {data.description.map((paragraph) => (
                <p class="text-ink-100 text-lg md:text-xl leading-relaxed" set:html={paragraph}></p>
            ))}
        </div>

        <div class="flex flex-col sm:flex-row gap-8 mb-12">
            <div class="relative bg-ink-900/50 border border-ochre-600/30 p-6 rounded-sm min-w-[240px] group hover:border-ochre-600 transition-colors duration-300">
                <div class="absolute -top-3 left-4 bg-ink-950 px-2 text-xs text-ochre-500 font-bold uppercase tracking-widest">
                    Certificate No.
                </div>
                <div class="flex items-center gap-3">
                    <FaWrench className="text-ochre-600 text-xl" />
                    <span class="text-2xl font-mono text-white font-bold tracking-wider group-hover:text-ochre-500 transition-colors">
                        {data.stationNumber}
                    </span>
                </div>
            </div>
        </div>

        <div class="grid grid-cols-1 sm:grid-cols-2 gap-y-4 gap-x-8">
          {data.features.map((feature) => (
            <div class="flex items-center gap-3 group">
              <div class="flex-shrink-0 w-5 h-5 rounded-full bg-ink-950/20 border border-ochre-600/50 flex items-center justify-center text-ochre-500 text-[10px] group-hover:bg-ochre-600 group-hover:text-white transition-all duration-300">
                <FaCheck />
              </div>
              <span class="text-ink-100 font-medium group-hover:text-white transition-colors">{feature}</span>
            </div>
          ))}
        </div>
      </div>

        <div class="order-1 lg:order-2 relative reveal-image opacity-0 translate-x-8 transition-all duration-1000 ease-out group">
            
            <div class="relative rounded-sm overflow-hidden shadow-2xl border-t-4 border-ochre-600 group-hover:border-ochre-400 transition-colors duration-500 aspect-[3/4]">
                <ImageComp 
                    src={repairImage} 
                    alt={repairAlt}
                    class="w-full h-full object-cover transition-transform duration-[2s] group-hover:scale-105"
                />
                
                <div class="absolute inset-0 bg-gradient-to-t from-ink-950/80 via-transparent to-transparent opacity-60"></div>

                <div class="absolute bottom-6 left-6 right-6">
                    <div class="inline-block px-4 py-2 bg-white/10 backdrop-blur-md border border-white/20 text-white text-xs font-bold uppercase tracking-widest rounded-sm">
                        FAA Authorized Service Center
                    </div>
                </div>
            </div>

            <div class="absolute -z-10 -bottom-6 -right-6 w-full h-full border-2 border-ochre-600 group-hover:border-ochre-400 transition-colors duration-500 rounded-sm"></div>
        </div>

    </div>
  </div>
</section>

<script>
  const observer = new IntersectionObserver((entries) => {
    entries.forEach((entry) => {
      if (entry.isIntersecting) {
        entry.target.classList.remove('opacity-0', 'translate-y-8', 'translate-x-8');
        entry.target.classList.add('opacity-100', 'translate-y-0', 'translate-x-0');
        observer.unobserve(entry.target);
      }
    });
  }, { threshold: 0.15 });

  document.querySelectorAll('.reveal-text, .reveal-image').forEach((el) => observer.observe(el));
</script>