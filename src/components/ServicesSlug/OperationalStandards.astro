---
import { FaCheckCircle } from "react-icons/fa";
import ImageComp from "../ImageComp.astro";

interface Props {
  data: {
    upperheader: string;
    title: string;
    mainImage: string;
    features: string[];
    aogNote?: string;
  };
}

const { data } = Astro.props;
---

<section class="relative py-20 md:py-32 bg-ink-950 text-ink-50 overflow-hidden">
  
  <div class="absolute inset-0 z-0 opacity-20">
    <ImageComp
      src={data.mainImage || "/src/assets/instructing/mh-aviation-instructing-student-how-to-repair-at-lancaster-california.webp"}
      alt="Maintenance Operations"
      class="w-full h-full object-cover object-center"
    />
  </div>

  <div class="max-w-7xl mx-auto px-5 md:px-8 lg:px-12 relative z-10">
    <div class="max-w-3xl">
      <span class="subtitle reveal-item opacity-0 translate-y-4 transition-all duration-700">
        {data.upperheader}
      </span>
      <h2 class="title reveal-item opacity-0 translate-y-4 transition-all duration-700 delay-100">
        {data.title}
      </h2>

      <div class="grid grid-cols-1 md:grid-cols-2 gap-x-12 gap-y-6 mb-12">
        {data.features.map((feature, idx) => (
          <div 
            class="flex items-start gap-4 reveal-item opacity-0 translate-y-4 transition-all duration-700"
            style={`transition-delay: ${idx * 100 + 200}ms`}
          >
            <FaCheckCircle className="text-ochre-500 mt-1 flex-shrink-0 text-lg" />
            <span class="text-lg text-ink-100 font-medium">{feature}</span>
          </div>
        ))}
      </div>

      {data.aogNote && (
        <div class="bg-ink-800/80 border-l-4 border-ochre-600 p-6 rounded-r-sm reveal-item opacity-0 translate-y-4 transition-all duration-700 delay-500">
          <p class="text-ink-200 text-sm italic">
            <strong class="text-ink-50 not-italic block mb-1 uppercase tracking-wider text-xs">Emergency Service</strong>
            {data.aogNote}
          </p>
        </div>
      )}
    </div>
  </div>
</section>

<script>
  const observer = new IntersectionObserver((entries) => {
    entries.forEach((entry) => {
      if (entry.isIntersecting) {
        entry.target.classList.remove('opacity-0', 'translate-y-4');
        observer.unobserve(entry.target);
      }
    });
  }, { threshold: 0.1 });

  document.querySelectorAll('.reveal-item').forEach((el) => observer.observe(el));
</script>